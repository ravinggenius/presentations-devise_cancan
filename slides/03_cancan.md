!SLIDE
.notes Initially all logic is placed in an `#initialize` method, however there is nothing stopping you from splitting permissions across many methods or even files
# Setup CanCan #

## Initialize permissions model ##
    @@@ bash
    $ rails generate cancan:ability

This creates a mostly empty model called `Ability`. Customize `initialize` to define permissions.


!SLIDE
.notes GOTCHA Projects with many controllers need to remember to secure all controllers
.notes Catch `CanCan::AccessDenied` to handle lack of permission
# Using CanCan #

## Helper methods for controllers and views ##
    @@@ ruby
    load_and_authorize_resource
    authorize_resource
    load_resource
    authorize!
    unauthorized!
    can?
    cannot?


!SLIDE
# Using CanCan (continued) #

`load_resource` (and `load_and_authorize_resource`) loads typical instance variables for each action.


!SLIDE incremental
.notes There are many options for customizing `load_resource` and friends
# Advanced CanCan #

## More helper methods ##
    @@@ ruby
    skip_load_and_authorize_resource
    skip_authorize_resource
    skip_load_resource

Customizing the finder generated by `load_resource`. In your `Ability` class:
    @@@ ruby
    can :manage, Product, :discontinued => false
You can also pass `:find_by` to `load_resource`.
